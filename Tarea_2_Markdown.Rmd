---
title: "Tarea_2"
author: "Revisión Soledad Araya"
date: "2025-11-19"
output: html_document
---

Este repositorio contiene una lista de las 1000 películas mejor calificadas en IMDB, junto con información relevante como el título, año de lanzamiento, género, director y calificación.

Descargué una base de datos de Kaggle, creada por Harshit Shankhdhar.

Librerías:

```{r}
library(tidyverse)
```

Cargamos la base y mostramos las primeras filas:

```{r}
df_imdb <- read_csv("data/imdb_top_1000.csv")


# Nombres de las columnas
colnames(df_imdb)

# Cambiamos los nombres para evitar caracteres especiales
df_imdb <- df_imdb |> 
  janitor::clean_names()
```

Seleccionamos las columnas relevantes: `series_title, released_year, genre, director, imdb_rating, Star1, Star2, Star3, Star4`.

Y creamos un nuevo objeto con ellas:

```{r}
df_select <- df_imdb |> 
  select("series_title", "released_year", "genre", "director", "imdb_rating", "star1", "star2", "star3", "star4")
```

Seleccionamos las películas con calificación mayor a 8.5 usando:

```{r}
df_high_rating <- df_select |> 
  filter(imdb_rating > 8.5)
```

Mostramos las primeras filas del nuevo objeto usando:

```{r}
head(df_high_rating)
```

Ahora las ordenamos por año de lanzamiento usando:

```{r}
df_sorted <- df_high_rating |> 
  arrange(released_year) 

head(df_sorted)
```

Creamos un gráfico de barras con ggplot2 para visualizar la cantidad de películas por año de lanzamiento:

```{r}
ggplot(df_sorted, aes(x = as.numeric(released_year))) + 
  geom_bar(fill = "blue") + 
  scale_x_continuous(breaks = seq(1945, 2020, 5)) +
  labs(title = "Cantidad de películas con IMDB Rating superior 8.5\nPor año de lanzamiento", 
       x = "Año de lanzamiento", 
       y = "Cantidad de películas") + 
  theme_minimal()
```

```{r}
ggsave("plots/plot_anio_lanzamiento.png", width = 8, height = 7)
```

Ahora revisaremos la cantidad de películas por género usando:

```{r}
df_genre_count <- df_sorted |> 
  group_by(genre) |> 
  summarise(count = n()) |> 
  arrange(desc(count))
```

Lo visualizaremos en un gráfico de barras:

```{r}
ggplot(df_genre_count, aes(x = reorder(genre, -count), y = count)) + 
  geom_bar(stat = "identity", fill = "green") + 
  labs(title = "Cantidad de películas por género", 
       x = "Género", 
       y = "Cantidad de películas") + 
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

```{r}
ggsave("plots/plot_genero.png", width = 8, height = 7)
```

Queremos saber cuáles son los directores con más películas en esta lista. Usamos:

```{r}
df_director_count <- df_sorted |> 
  group_by(director) |> 
  summarise(count = n()) |> 
  arrange(desc(count)) |> 
  head(10)
```

Y lo visualizamos con un gráfico de barras:

```{r}
ggplot(df_director_count, aes(x = reorder(director, -count), y = count)) + 
  geom_bar(stat = "identity", fill = "red") + 
  labs(title = "Top 10 directores con más películas", 
       x = "Director", 
       y = "Cantidad de películas") + 
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

```{r}
ggsave("plots/plot_director.png", width = 8, height = 7)
```

Ahora queremos ver los actores más frecuentes en estas películas. Usamos:

```{r}
df_actors <- df_sorted |> 
  select(star1, star2, star3, star4) |> 
  pivot_longer(cols = everything(), 
               names_to = "star", 
               values_to = "actor") |> 
  group_by(actor) |> 
  summarise(count = n()) |> 
  arrange(desc(count)) |> 
  head(10)
```

Y lo visualizamos con un gráfico de barras:

```{r}
ggplot(df_actors, aes(x = reorder(actor, -count), y = count)) + 
  geom_bar(stat = "identity", fill = "purple") + 
  labs(title = "Top 10 actores con más películas", 
       x = "Actor", 
       y = "Cantidad de películas") + 
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

```{r}
ggsave("plots/plot_actor.png", width = 8, height = 7)
```
